{% extends 'base.html' %}

{% block title %}{{ app_name }} - Find Your Perfect Caregiver{% endblock %}

{% block extra_css %}
<style>
  /* ==================== MINIMAL CUSTOM STYLES (Bootstrap-first approach) ==================== */
  :root {
    --primary-blue: #0d6efd;
    --primary-orange: #fc9255;
    --primary-orange-light: rgba(252, 146, 85, 0.1);
  }

  /* Main Container */
  #main-content {
    background-color: #f8f9fa;
  }

  /* ==================== RESPONSIVE CONTAINER ==================== */
  .caregiver-container {
    width: 95%;
    margin: 2rem auto;
  }

  /* Tablet: 98% width */
  @media (min-width: 768px) {
    .caregiver-container {
      width: 98%;
      margin: 2.5rem auto;
    }
  }

  /* Laptop/Desktop: 80% width */
  @media (min-width: 1200px) {
    .caregiver-container {
      width: 80%;
      margin: 3rem auto;
    }
  }

  /* Filter Card - Sticky Sidebar */
  .filter-card {
    position: sticky;
    top: 90px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
    min-width: 280px; /* Minimum width maintained */
  }

  .filter-card::-webkit-scrollbar {
    width: 6px;
  }

  .filter-card::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }

  .filter-card::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 10px;
  }

  /* Caregiver List Section */
  .caregiver-list-section {
    min-width: 300px; /* Minimum width maintained */
  }

  /* Custom Filter Buttons */
  .filter-btn {
    border-radius: 20px;
    font-size: 14px;
    padding: 6px 16px;
    margin: 4px 4px 4px 0;
    border: 1.5px solid #dee2e6;
    background: white;
    color: #495057;
    transition: all 0.3s;
  }

  .filter-btn:hover {
    border-color: var(--primary-orange);
    color: var(--primary-orange);
    background: var(--primary-orange-light);
  }

  .filter-btn.active {
    background: var(--primary-orange);
    color: white;
    border-color: var(--primary-orange);
  }

  /* Range Slider */
  .payrate-range {
    width: 100%;
    height: 6px;
    border-radius: 5px;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    background: linear-gradient(to right, var(--primary-orange) 0%, var(--primary-orange) 50%, #dee2e6 50%, #dee2e6 100%);
  }

  .payrate-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-orange);
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(252, 146, 85, 0.4);
    transition: all 0.3s;
  }

  .payrate-range::-webkit-slider-thumb:hover {
    transform: scale(1.2);
  }

  .payrate-range::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-orange);
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 6px rgba(252, 146, 85, 0.4);
  }

  /* Star Filter Buttons */
  .star-btn {
    border-radius: 20px;
    font-size: 14px;
    padding: 6px 14px;
    background: white;
    color: #495057;
    border: 1px solid #98a2b3;
    transition: all 0.3s;
  }

  .star-btn:hover {
    border-color: #ffc107;
    background: #fff9e6;
  }

  .star-btn.active {
    background: #ffc107;
    color: white;
    border-color: #ffc107;
  }

  /* Caregiver Card Hover Effect */
  .caregiver-card {
    transition: all 0.3s;
  }

  .caregiver-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  }

  /* Verified Badge */
  .verified-badge {
    position: absolute;
    bottom: -2px;
    right: -2px;
    background: #28a745;
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid white;
    font-size: 12px;
  }

  /* Book Button Gradient */
  .book-btn {
    background: linear-gradient(135deg, var(--primary-blue) 0%, #0a58ca 100%);
    box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
  }

  .book-btn:hover {
    background: linear-gradient(135deg, #0a58ca 0%, var(--primary-blue) 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(13, 110, 253, 0.4);
  }

  /* ==================== RESPONSIVE ADJUSTMENTS ==================== */
  
  /* Mobile: Stack layout, remove sticky */
  @media (max-width: 991.98px) {
    .filter-card {
      position: static;
      max-height: none;
      margin-bottom: 1.5rem;
      min-width: auto;
    }

    .caregiver-container {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
  }

  /* Tablet: Side by side layout */
  @media (min-width: 768px) and (max-width: 991.98px) {
    .filter-sidebar {
      flex: 0 0 35%; /* 35% width for filter */
      max-width: 35%;
    }

    .caregiver-list-section {
      flex: 0 0 65%; /* 65% width for caregiver list */
      max-width: 65%;
    }
  }

  /* Large Tablet/Small Desktop */
  @media (min-width: 992px) and (max-width: 1199.98px) {
    .filter-sidebar {
      flex: 0 0 30%;
      max-width: 30%;
    }

    .caregiver-list-section {
      flex: 0 0 70%;
      max-width: 70%;
    }
  }

  /* Desktop: Original 3-9 grid */
  @media (min-width: 1200px) {
    .filter-sidebar {
      flex: 0 0 25%;
      max-width: 25%;
    }

    .caregiver-list-section {
      flex: 0 0 75%;
      max-width: 75%;
    }
  }

  /* Extra Small Mobile Adjustments */
  @media (max-width: 575.98px) {
    .caregiver-card {
      padding: 1rem !important;
    }

    .caregiver-card .row {
      flex-direction: column;
    }

    .caregiver-card .col-md-4 {
      margin-top: 1rem;
    }
  }
</style>
{% endblock %}

{% block content %}
<!-- Main Content -->
<div class="caregiver-container">
  <div class="row g-3 g-md-4">

    <!-- ==================== LEFT SIDEBAR - FILTERS ==================== -->
    <div class="col-12 col-lg-3 filter-sidebar">
      <div class="card border-0 shadow-sm rounded-3 filter-card">
        <div class="card-body p-3 p-md-4">
          
          <!-- Showing Results For -->
          <label class="form-label fw-semibold small mb-2">Showing results for</label>
          <select class="form-select mb-3" id="careType">
            <option selected>One-time sitter</option>
            <option>Full-time caregiver</option>
            <option>Night sitter</option>
            <option>Part-time caregiver</option>
          </select>

          <!-- Care Location -->
          <label class="form-label fw-semibold small mb-2">Where do you need care</label>
          <select class="form-select mb-3" id="careLocation">
            <option selected>At home</option>
            <option>At hospital</option>
            <option>At facility</option>
            <option>At nursing home</option>
          </select>

          <!-- Filter Header -->
          <div class="d-flex justify-content-between align-items-center border-bottom pb-3 mb-3 mt-4">
            <h6 class="mb-0 fw-semibold">Filters</h6>
            <a href="#" class="text-secondary text-decoration-none small" id="clearAllFilters">Clear all</a>
          </div>

          <!-- Pay Rate -->
          <h6 class="fw-semibold mb-3 mt-4 small">Pay Rate</h6>
          <input type="range" class="payrate-range" id="payrateSlider" min="10" max="100" value="50" />
          <p class="small text-primary fw-semibold mt-2 mb-0">
            $<span id="minRate">15</span> – $<span id="maxRate">50</span> / hour
          </p>

          <!-- Number of Children -->
          <h6 class="fw-semibold mb-3 mt-4 small">Number of Children</h6>
          <div class="d-flex justify-content-between align-items-center mb-3">
            <span id="childCount" class="fw-semibold">1 Child</span>
            <div class="btn-group" role="group">
              <button class="btn btn-sm btn-outline-secondary" id="decreaseChild" style="background-color:#D0D5DD; color:#111; border:none; margin:0 2px; border-radius:50%;">
                <i class="fas fa-minus"></i>
              </button>
              <button class="btn btn-sm btn-primary" id="increaseChild" style="background-color:#024FAA; border:none; margin:0 2px; border-radius:50%;">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>

          <!-- Child Age Ranges -->
          <h6 class="fw-semibold mb-3 mt-4 small">Child Age Ranges</h6>
          <div class="mb-3">
            <button class="btn btn-sm filter-btn" data-filter="age">0–11 months</button>
            <button class="btn btn-sm filter-btn" data-filter="age">1–3 Years</button>
            <button class="btn btn-sm filter-btn" data-filter="age">4–5 Years</button>
            <button class="btn btn-sm filter-btn" data-filter="age">6–9 Years</button>
            <button class="btn btn-sm filter-btn" data-filter="age">10+ Years</button>
          </div>

          <!-- Ratings -->
          <h6 class="fw-semibold mb-3 mt-4 small">Ratings</h6>
          <div class="d-flex flex-wrap gap-2 mb-3">
            <button class="btn btn-sm star-btn" data-rating="0"><i class="far fa-star text-warning"></i> 0</button>
            <button class="btn btn-sm star-btn" data-rating="1"><i class="fas fa-star text-warning"></i> 1</button>
            <button class="btn btn-sm star-btn" data-rating="2"><i class="fas fa-star text-warning"></i> 2</button>
            <button class="btn btn-sm star-btn" data-rating="3"><i class="fas fa-star text-warning"></i> 3</button>
            <button class="btn btn-sm star-btn" data-rating="4"><i class="fas fa-star text-warning"></i> 4</button>
            <button class="btn btn-sm star-btn" data-rating="5"><i class="fas fa-star text-warning"></i> 5</button>
          </div>

          <!-- Select Services -->
          <h6 class="fw-semibold mb-3 mt-4 small">Select Service</h6>
          <div class="mb-3">
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service1" />
              <label class="form-check-label small" for="service1">Personal care</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service2" />
              <label class="form-check-label small" for="service2">Domestic assistance</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service3" />
              <label class="form-check-label small" for="service3">Social Support & Community</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service4" />
              <label class="form-check-label small" for="service4">Specialist care</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service5" />
              <label class="form-check-label small" for="service5">Out & About Transport</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service6" />
              <label class="form-check-label small" for="service6">Relief Respite Care</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service7" />
              <label class="form-check-label small" for="service7">Coaching & Counselling</label>
            </div>
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="service8" />
              <label class="form-check-label small" for="service8">Disability Products</label>
            </div>
          </div>

          <!-- Date Range -->
          <h6 class="fw-semibold mb-3 mt-4 small">Date Range</h6>
          <label for="startDate" class="form-label small">Start Date</label>
          <input type="date" class="form-control mb-2" id="startDate" />
          <label for="endDate" class="form-label small">End Date</label>
          <input type="date" class="form-control mb-3" id="endDate" />

          <!-- Professional Skills -->
          <h6 class="fw-semibold mb-3 mt-4 small">Professional Skills</h6>
          <div class="mb-3">
            <button class="btn btn-sm filter-btn" data-filter="skill">CPR Training</button>
            <button class="btn btn-sm filter-btn" data-filter="skill">First Aid</button>
            <button class="btn btn-sm filter-btn" data-filter="skill">Special Need Care</button>
            <button class="btn btn-sm filter-btn" data-filter="skill">Dementia Care</button>
            <button class="btn btn-sm filter-btn" data-filter="skill">Medication Management</button>
          </div>

          <!-- Preferences -->
          <h6 class="fw-semibold mb-3 mt-4 small">Preferences</h6>
          <div class="mb-3">
            <button class="btn btn-sm filter-btn" data-filter="pref">Comfort with pets</button>
            <button class="btn btn-sm filter-btn" data-filter="pref">Non smoker</button>
            <button class="btn btn-sm filter-btn" data-filter="pref">Has own transport</button>
            <button class="btn btn-sm filter-btn" data-filter="pref">Vaccinated</button>
          </div>

          <!-- Languages Known -->
          <h6 class="fw-semibold mb-3 mt-4 small">Languages Known</h6>
          <div class="mb-3">
            <button class="btn btn-sm filter-btn" data-filter="lang">English</button>
            <button class="btn btn-sm filter-btn" data-filter="lang">Hindi</button>
            <button class="btn btn-sm filter-btn" data-filter="lang">Marathi</button>
            <button class="btn btn-sm filter-btn" data-filter="lang">French</button>
            <button class="btn btn-sm filter-btn" data-filter="lang">Spanish</button>
          </div>

        </div>
      </div>
    </div>

    <!-- ==================== RIGHT SECTION - CAREGIVER LIST ==================== -->
    <div class="col-12 col-lg-9 caregiver-list-section">
      <div class="card border-0 shadow-sm rounded-3">
        <div class="card-body p-3 p-md-4">
          
          <!-- Section Header -->
          <div class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom flex-wrap gap-2">
            <h5 class="mb-0 fw-bold">Available Caregivers</h5>
            <span class="text-muted small"><strong>24</strong> caregivers found</span>
          </div>

          <!-- Caregiver Card 1 -->
          <div class="card border rounded-3 p-3 mb-3 caregiver-card">
            <div class="row g-3 align-items-center">
              <div class="col-md-8">
                <div class="d-flex align-items-center gap-3">
                  <div class="position-relative flex-shrink-0">
                    <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Paula Mora" class="rounded-3" style="width: 70px; height: 70px; object-fit: cover; border: 2px solid #fc9255;" />
                    <span class="verified-badge">
                      <i class="fas fa-check"></i>
                    </span>
                  </div>
                  <div>
                    <h6 class="mb-1 fw-semibold">Paula Mora</h6>
                    <div class="text-muted small mb-1">
                      <i class="fas fa-map-marker-alt me-1"></i>
                      <span>Mumbai, India</span>
                    </div>
                    <div class="d-flex align-items-center gap-2 small flex-wrap">
                      <div class="text-warning fw-semibold">
                        <i class="fas fa-star"></i> 5.0
                      </div>
                      <span class="text-muted border-start ps-2">Full Time Caregiver</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 text-md-end">
                <div class="mb-2">
                  <div class="fw-semibold small">$30–$40/hr</div>
                  <div class="text-muted small">5 years experience</div>
                </div>
                <a href="/booking" class="btn btn-primary rounded-pill px-4 py-2 book-btn text-white text-decoration-none d-inline-block">Book</a>
                <div class="text-success small mt-2">
                  <i class="fas fa-shield me-1"></i>
                  <span>Background verified</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Caregiver Card 2 -->
          <div class="card border rounded-3 p-3 mb-3 caregiver-card">
            <div class="row g-3 align-items-center">
              <div class="col-md-8">
                <div class="d-flex align-items-center gap-3">
                  <div class="position-relative flex-shrink-0">
                    <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Lisa Gomez" class="rounded-3" style="width: 70px; height: 70px; object-fit: cover; border: 2px solid #fc9255;" />
                    <span class="verified-badge">
                      <i class="fas fa-check"></i>
                    </span>
                  </div>
                  <div>
                    <h6 class="mb-1 fw-semibold">Lisa Gomez</h6>
                    <div class="text-muted small mb-1">
                      <i class="fas fa-map-marker-alt me-1"></i>
                      <span>Pune, India</span>
                    </div>
                    <div class="d-flex align-items-center gap-2 small flex-wrap">
                      <div class="text-warning fw-semibold">
                        <i class="fas fa-star"></i> 4.8
                      </div>
                      <span class="text-muted border-start ps-2">Night Sitter</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 text-md-end">
                <div class="mb-2">
                  <div class="fw-semibold small">$25–$35/hr</div>
                  <div class="text-muted small">4 years experience</div>
                </div>
                <a href="/booking" class="btn btn-primary rounded-pill px-4 py-2 book-btn text-white text-decoration-none d-inline-block">Book</a>
                <div class="text-success small mt-2">
                  <i class="fas fa-shield me-1"></i>
                  <span>Background verified</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Caregiver Card 3 -->
          <div class="card border rounded-3 p-3 mb-3 caregiver-card">
            <div class="row g-3 align-items-center">
              <div class="col-md-8">
                <div class="d-flex align-items-center gap-3">
                  <div class="position-relative flex-shrink-0">
                    <img src="https://randomuser.me/api/portraits/women/48.jpg" alt="Neha Patel" class="rounded-3" style="width: 70px; height: 70px; object-fit: cover; border: 2px solid #fc9255;" />
                    <span class="verified-badge">
                      <i class="fas fa-check"></i>
                    </span>
                  </div>
                  <div>
                    <h6 class="mb-1 fw-semibold">Neha Patel</h6>
                    <div class="text-muted small mb-1">
                      <i class="fas fa-map-marker-alt me-1"></i>
                      <span>Thane, India</span>
                    </div>
                    <div class="d-flex align-items-center gap-2 small flex-wrap">
                      <div class="text-warning fw-semibold">
                        <i class="fas fa-star"></i> 4.9
                      </div>
                      <span class="text-muted border-start ps-2">Part-time Caregiver</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 text-md-end">
                <div class="mb-2">
                  <div class="fw-semibold small">$20–$30/hr</div>
                  <div class="text-muted small">3 years experience</div>
                </div>
                <a href="/booking" class="btn btn-primary rounded-pill px-4 py-2 book-btn text-white text-decoration-none d-inline-block">Book</a>
                <div class="text-success small mt-2">
                  <i class="fas fa-shield me-1"></i>
                  <span>Background verified</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Caregiver Card 4 -->
          <div class="card border rounded-3 p-3 mb-3 caregiver-card">
            <div class="row g-3 align-items-center">
              <div class="col-md-8">
                <div class="d-flex align-items-center gap-3">
                  <div class="position-relative flex-shrink-0">
                    <img src="https://randomuser.me/api/portraits/women/32.jpg" alt="Priya Singh" class="rounded-3" style="width: 70px; height: 70px; object-fit: cover; border: 2px solid #fc9255;" />
                    <span class="verified-badge">
                      <i class="fas fa-check"></i>
                    </span>
                  </div>
                  <div>
                    <h6 class="mb-1 fw-semibold">Priya Singh</h6>
                    <div class="text-muted small mb-1">
                      <i class="fas fa-map-marker-alt me-1"></i>
                      <span>Delhi, India</span>
                    </div>
                    <div class="d-flex align-items-center gap-2 small flex-wrap">
                      <div class="text-warning fw-semibold">
                        <i class="fas fa-star"></i> 4.7
                      </div>
                      <span class="text-muted border-start ps-2">Specialist Care</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 text-md-end">
                <div class="mb-2">
                  <div class="fw-semibold small">$35–$45/hr</div>
                  <div class="text-muted small">6 years experience</div>
                </div>
                <a href="/booking" class="btn btn-primary rounded-pill px-4 py-2 book-btn text-white text-decoration-none d-inline-block">Book</a>
                <div class="text-success small mt-2">
                  <i class="fas fa-shield me-1"></i>
                  <span>Background verified</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Pagination -->
          <nav aria-label="Caregiver list pagination" class="mt-4">
            <ul class="pagination justify-content-center mb-0 flex-wrap">
              <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
              </li>
              <li class="page-item active"><a class="page-link" href="#">1</a></li>
              <li class="page-item"><a class="page-link" href="#">2</a></li>
              <li class="page-item"><a class="page-link" href="#">3</a></li>
              <li class="page-item">
                <a class="page-link" href="#">Next</a>
              </li>
            </ul>
          </nav>

        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // ==================== PAYRATE SLIDER ====================
  const payrateSlider = document.getElementById('payrateSlider');
  const minRateDisplay = document.getElementById('minRate');
  const maxRateDisplay = document.getElementById('maxRate');

  payrateSlider.addEventListener('input', function() {
    const value = this.value;
    const min = 15;
    const max = value;
    
    minRateDisplay.textContent = min;
    maxRateDisplay.textContent = max;
    
    const percentage = ((value - 10) / (100 - 10)) * 100;
    this.style.background = `linear-gradient(to right, var(--primary-orange) 0%, var(--primary-orange) ${percentage}%, #dee2e6 ${percentage}%, #dee2e6 100%)`;
  });

  // ==================== CHILD COUNTER ====================
  let childCount = 1;
  const childCountDisplay = document.getElementById('childCount');
  const decreaseBtn = document.getElementById('decreaseChild');
  const increaseBtn = document.getElementById('increaseChild');

  decreaseBtn.addEventListener('click', function() {
    if (childCount > 1) {
      childCount--;
      updateChildCount();
    }
  });

  increaseBtn.addEventListener('click', function() {
    if (childCount < 10) {
      childCount++;
      updateChildCount();
    }
  });

  function updateChildCount() {
    childCountDisplay.textContent = childCount === 1 ? '1 Child' : `${childCount} Children`;
  }

  // ==================== FILTER BUTTON TOGGLE ====================
  const filterButtons = document.querySelectorAll('.filter-btn');
  filterButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      this.classList.toggle('active');
    });
  });

  // ==================== STAR RATING FILTER ====================
  const starButtons = document.querySelectorAll('.star-btn');
  starButtons.forEach(btn => {
    btn.addEventListener('click', function() {
      starButtons.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      
      const rating = this.getAttribute('data-rating');
      console.log('Filter by rating:', rating);
    });
  });

  // ==================== CLEAR ALL FILTERS ====================
  document.getElementById('clearAllFilters').addEventListener('click', function(e) {
    e.preventDefault();
    
    document.querySelectorAll('.filter-btn, .star-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    
    document.querySelectorAll('.form-check-input').forEach(checkbox => {
      checkbox.checked = false;
    });
    
    document.getElementById('careType').selectedIndex = 0;
    document.getElementById('careLocation').selectedIndex = 0;
    
    payrateSlider.value = 50;
    payrateSlider.dispatchEvent(new Event('input'));
    
    childCount = 1;
    updateChildCount();
    
    document.getElementById('startDate').value = '';
    document.getElementById('endDate').value = '';
    
    console.log('All filters cleared');
  });

  // ==================== SMOOTH SCROLL TO TOP ====================
  document.querySelectorAll('.page-link').forEach(link => {
    link.addEventListener('click', function(e) {
      if (this.getAttribute('href') === '#') {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });
  });
</script>
{% endblock %}