<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Select App Language - {{ app_name }}</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    /* ==================== CUSTOM STYLES ==================== */
    :root {
      --primary-orange: #f26a2e;
      --primary-orange-dark: #d9571e;
    }

    body {
      background-color: #fff;
      font-family: "Inter", sans-serif;
      min-height: 100vh;
    }

    .language-card {
      background-color: var(--primary-orange);
      color: white;
      border-radius: 12px;
      padding: 30px 0;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
      position: relative;
      border: 2px solid transparent;
    }

    .language-card:hover {
      transform: translateY(-5px);
      background-color: var(--primary-orange-dark);
    }

    .language-card.active {
      border-color: #fff;
      box-shadow: 0 0 0 3px var(--primary-orange-dark);
    }

    .checkmark {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 22px;
      height: 22px;
      border: 2px solid white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s;
    }

    .checkmark::after {
      content: "✔";
      font-size: 14px;
      color: var(--primary-orange);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .language-card.active .checkmark {
      background-color: white;
      border-color: white;
    }

    .language-card.active .checkmark::after {
      opacity: 1;
    }

    .btn-continue {
      background-color: var(--primary-orange);
      color: white;
      font-weight: 600;
      border-radius: 30px;
      padding: 12px 50px;
      border: none;
      transition: background 0.3s, transform 0.2s;
      font-size: 1.05rem;
    }

    .btn-continue:hover {
      background-color: var(--primary-orange-dark);
      color: white;
      transform: translateY(-2px);
    }

    @media (max-width: 576px) {
      .language-card {
        padding: 20px 0;
      }

      .language-card h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>

<body class="d-flex justify-content-center align-items-center">

  <div class="container" style="max-width: 550px;">
    <div class="text-center mb-4">
      <!-- Logo (Optional) -->
      <!-- <img src="{{ url_for('static', filename='images/caredac-logo.png') }}" alt="CareDac" class="mb-4" style="max-width: 150px;"> -->
      
      <h2 class="fw-bold mb-2" id="title-text">Select app language</h2>
      <p class="text-muted mb-4" id="subtitle-text">Select language for your entire application</p>
    </div>

    <!-- Language Grid -->
    <div class="row g-3 mb-4">
      
      <!-- English -->
      <div class="col-6">
        <div class="language-card active" data-lang="en">
          <div class="checkmark"></div>
          <small class="d-block mb-2">English</small>
          <h1 class="mb-0">A</h1>
        </div>
      </div>

      <!-- Malaysian -->
      <div class="col-6">
        <div class="language-card" data-lang="ms">
          <div class="checkmark"></div>
          <small class="d-block mb-2">Malaysian</small>
          <h1 class="mb-0">M</h1>
        </div>
      </div>

      <!-- Thai -->
      <div class="col-6">
        <div class="language-card" data-lang="th">
          <div class="checkmark"></div>
          <small class="d-block mb-2">Thai</small>
          <h1 class="mb-0">น</h1>
        </div>
      </div>

      <!-- Indonesian -->
      <div class="col-6">
        <div class="language-card" data-lang="id">
          <div class="checkmark"></div>
          <small class="d-block mb-2">Indonesian</small>
          <h1 class="mb-0">I</h1>
        </div>
      </div>

    </div>

    <!-- Continue Button -->
    <div class="text-center">
      <button id="continue-btn" class="btn btn-continue shadow">
        Continue
      </button>
    </div>

  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // ==================== TRANSLATIONS ====================
    const translations = {
      en: { 
        title: "Select app language", 
        subtitle: "Select language for your entire application",
        button: "Continue"
      },
      ms: { 
        title: "Pilih bahasa aplikasi", 
        subtitle: "Pilih bahasa untuk keseluruhan aplikasi anda",
        button: "Teruskan"
      },
      th: { 
        title: "เลือกภาษาของแอป", 
        subtitle: "เลือกภาษาสำหรับแอปพลิเคชันทั้งหมดของคุณ",
        button: "ดำเนินการต่อ"
      },
      id: { 
        title: "Pilih bahasa aplikasi", 
        subtitle: "Pilih bahasa untuk seluruh aplikasi Anda",
        button: "Lanjutkan"
      }
    };

    // ==================== DOM ELEMENTS ====================
    const cards = document.querySelectorAll(".language-card");
    const titleText = document.getElementById("title-text");
    const subtitleText = document.getElementById("subtitle-text");
    const continueBtn = document.getElementById("continue-btn");
    
    // Check if language was already selected
    let selectedLang = localStorage.getItem("lang") || "en";

    // ==================== LANGUAGE SELECTION ====================
    cards.forEach((card) => {
      // Set active card on load
      if (card.dataset.lang === selectedLang) {
        cards.forEach(c => c.classList.remove('active'));
        card.classList.add('active');
        updateText(selectedLang);
      }

      // Handle click
      card.addEventListener("click", () => {
        cards.forEach((c) => c.classList.remove("active"));
        card.classList.add("active");
        selectedLang = card.dataset.lang;
        updateText(selectedLang);
      });
    });

    // ==================== UPDATE TEXT FUNCTION ====================
    function updateText(lang) {
      const { title, subtitle, button } = translations[lang];
      titleText.textContent = title;
      subtitleText.textContent = subtitle;
      continueBtn.textContent = button;
    }

    // ==================== CONTINUE BUTTON ====================
    continueBtn.addEventListener("click", () => {
      // Store selected language
      localStorage.setItem("lang", selectedLang);
      
      console.log('Language selected:', selectedLang);
      
      // Redirect to login page
      window.location.href = "/login";
    });

    // ==================== SKIP IF ALREADY SELECTED ====================
    // Uncomment this to auto-redirect if language was already chosen
    /*
    if (localStorage.getItem("lang")) {
      // User has already selected language, skip this page
      window.location.href = "/login";
    }
    */
  </script>

</body>
</html>